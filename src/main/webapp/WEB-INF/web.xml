<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
         version="3.1">
  <listener>
    <listener-class>com.artmal.listener.Listener</listener-class>
  </listener>

  <jsp-config>
    <jsp-property-group>
      <url-pattern>*.jsp</url-pattern>
      <page-encoding>UTF-8</page-encoding>
    </jsp-property-group>
  </jsp-config>

  <servlet-mapping>
    <servlet-name>login</servlet-name>
    <url-pattern></url-pattern>
  </servlet-mapping>

  <!-- Servlets -->
  <servlet>
    <servlet-name>register</servlet-name>
    <servlet-class>com.artmal.controller.RegistrationServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>register</servlet-name>
    <url-pattern>/register</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>mySettingsServlet</servlet-name>
    <servlet-class>com.artmal.controller.MySettingsPageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>mySettingsServlet</servlet-name>
    <url-pattern>/my-settings</url-pattern>
    <url-pattern>/my-settings/save</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>loginServlet</servlet-name>
    <servlet-class>com.artmal.controller.LoginServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>loginServlet</servlet-name>
    <url-pattern>/loginServlet</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>logoutServlet</servlet-name>
    <servlet-class>com.artmal.controller.LogoutServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>logoutServlet</servlet-name>
    <url-pattern>/logout</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>adminDashboard_driversPageServlet</servlet-name>
    <servlet-class>com.artmal.controller.admin_dashboard.DriversPageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>adminDashboard_driversPageServlet</servlet-name>
    <url-pattern>/admin-dashboard/drivers</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>adminDashboard_dispatcherServlet</servlet-name>
    <servlet-class>com.artmal.controller.admin_dashboard.DispatchersPageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>adminDashboard_dispatcherServlet</servlet-name>
    <url-pattern>/admin-dashboard/dispatchers</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>admin-dispatcher_tripsServlet</servlet-name>
    <servlet-class>com.artmal.controller.admin_dispatcher.TripsPageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>admin-dispatcher_tripsServlet</servlet-name>
    <url-pattern>/admin-dashboard/trips</url-pattern>
    <url-pattern>/dispatcher-dashboard/trips</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>adminDashboard_cars</servlet-name>
    <servlet-class>com.artmal.controller.admin_dashboard.CarsPageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>adminDashboard_cars</servlet-name>
    <url-pattern>/admin-dashboard/cars</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>profilesServlet</servlet-name>
    <servlet-class>com.artmal.controller.admin_dispatcher.ProfilesViewServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>profilesServlet</servlet-name>
    <url-pattern>/drivers/profile</url-pattern>
    <url-pattern>/dispatchers/profile</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>driversGaragePageServlet</servlet-name>
    <servlet-class>com.artmal.controller.admin_dispatcher.driver_profile.DriverGaragePageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>driversGaragePageServlet</servlet-name>
    <url-pattern>/drivers/profile/garage</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>tripRequestAcceptServlet</servlet-name>
    <servlet-class>com.artmal.controller.admin_dispatcher.TripRequestAcceptServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>tripRequestAcceptServlet</servlet-name>
    <url-pattern>/dispatcher-dashboard/trip/accept</url-pattern>
    <url-pattern>/admin-dashboard/trip/accept</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>driverDashboard_garage</servlet-name>
    <servlet-class>com.artmal.controller.driver_dashboard.GaragePageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>driverDashboard_garage</servlet-name>
    <url-pattern>/driver-dashboard/garage</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>driverDashboard_tripsPageServlet</servlet-name>
    <servlet-class>com.artmal.controller.driver_dashboard.TripsPageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>driverDashboard_tripsPageServlet</servlet-name>
    <url-pattern>/driver-dashboard/trips</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>driverDashboard_tripsInfoPageServlet</servlet-name>
    <servlet-class>com.artmal.controller.driver_dashboard.TripInfoPageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>driverDashboard_tripsInfoPageServlet</servlet-name>
    <url-pattern>/driver-dashboard/trip</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>driverDashboard_myRequestsPageServlet</servlet-name>
    <servlet-class>com.artmal.controller.driver_dashboard.MyTripRequestsPageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>driverDashboard_myRequestsPageServlet</servlet-name>
    <url-pattern>/driver-dashboard/my-requests</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>driverDashboard_tripRequestDiscardServlet</servlet-name>
    <servlet-class>com.artmal.controller.driver_dashboard.DiscardTripRequestServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>driverDashboard_tripRequestDiscardServlet</servlet-name>
    <url-pattern>/driver-dashboard/my-requests/discard</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>driverDashboard_myTripsPageServlet</servlet-name>
    <servlet-class>com.artmal.controller.driver_dashboard.MyTripsPageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>driverDashboard_myTripsPageServlet</servlet-name>
    <url-pattern>/driver-dashboard/my-trips</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>driverDashboard_completeTripServlet</servlet-name>
    <servlet-class>com.artmal.controller.driver_dashboard.CompleteTripServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>driverDashboard_completeTripServlet</servlet-name>
    <url-pattern>/driver-dashboard/my-trips/complete</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>tripInfoServlet</servlet-name>
    <servlet-class>com.artmal.controller.admin_dispatcher.TripInfoPageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>tripInfoServlet</servlet-name>
    <url-pattern>/dispatcher-dashboard/trip</url-pattern>
    <url-pattern>/admin-dashboard/trip</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>carInfoPageServlet</servlet-name>
    <servlet-class>com.artmal.controller.admin_driver.CarInfoPageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>carInfoPageServlet</servlet-name>
    <url-pattern>/car</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>carInfoSaveServlet</servlet-name>
    <servlet-class>com.artmal.controller.admin_driver.CarInfoPageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>carInfoSaveServlet</servlet-name>
    <url-pattern>/car/save</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>deleteCarServlet</servlet-name>
    <servlet-class>com.artmal.controller.admin_driver.DeleteCarServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>deleteCarServlet</servlet-name>
    <url-pattern>/driver-dashboard/garage/delete</url-pattern>
    <url-pattern>/car/delete</url-pattern>
  </servlet-mapping>

  <!-- JSP -->
  <servlet>
    <servlet-name>login</servlet-name>
    <jsp-file>/WEB-INF/views/login.jsp</jsp-file>
  </servlet>

  <servlet-mapping>
    <servlet-name>login</servlet-name>
    <url-pattern>/login</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>registration</servlet-name>
    <jsp-file>/WEB-INF/views/registration.jsp</jsp-file>
  </servlet>

  <servlet-mapping>
    <servlet-name>registration</servlet-name>
    <url-pattern>/registration</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>adminDashboard</servlet-name>
    <jsp-file>/WEB-INF/views/admin_dashboard/adminDashboard.jsp</jsp-file>
  </servlet>

  <servlet-mapping>
    <servlet-name>adminDashboard</servlet-name>
    <url-pattern>/admin-dashboard</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>profilePage</servlet-name>
    <jsp-file>/WEB-INF/views/profile.jsp</jsp-file>
  </servlet>

  <servlet-mapping>
    <servlet-name>profilePage</servlet-name>
    <url-pattern>/profile</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>adminDashboard-users</servlet-name>
    <jsp-file>/WEB-INF/views/admin_dashboard/usersView.jsp</jsp-file>
  </servlet>

  <servlet-mapping>
    <servlet-name>adminDashboard-users</servlet-name>
    <url-pattern>/admin-dashboard/user</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>dispatcherDashboard</servlet-name>
    <jsp-file>/WEB-INF/views/dispatcher_dashboard/dispatcherDashboard.jsp</jsp-file>
  </servlet>

  <servlet-mapping>
    <servlet-name>dispatcherDashboard</servlet-name>
    <url-pattern>/dispatcher-dashboard</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>driverDashboard</servlet-name>
    <jsp-file>/WEB-INF/views/driver_dashboard/driverDashboard.jsp</jsp-file>
  </servlet>

  <servlet-mapping>
    <servlet-name>driverDashboard</servlet-name>
    <url-pattern>/driver-dashboard</url-pattern>
  </servlet-mapping>

  <!-- Filters -->
  <filter>
    <filter-name>alreadyLoggedInFilter</filter-name>
    <filter-class>com.artmal.filter.AlreadyLoggedInFilter</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>alreadyLoggedInFilter</filter-name>
    <url-pattern>/login</url-pattern>
  </filter-mapping>

  <filter>
    <filter-name>adminFilter</filter-name>
    <filter-class>com.artmal.filter.AdminFilter</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>adminFilter</filter-name>
    <url-pattern>/admin-dashboard/*</url-pattern>
  </filter-mapping>

  <filter>
    <filter-name>dispatcherFilter</filter-name>
    <filter-class>com.artmal.filter.DispatcherFilter</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>dispatcherFilter</filter-name>
    <url-pattern>/dispatcher-dashboard/*</url-pattern>
  </filter-mapping>

  <filter>
    <filter-name>driverFilter</filter-name>
    <filter-class>com.artmal.filter.DriverFilter</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>driverFilter</filter-name>
    <url-pattern>/driver-dashboard/*</url-pattern>
  </filter-mapping>

  <filter>
    <filter-name>characterSetFilter</filter-name>
    <filter-class>com.artmal.filter.CharacterFilter</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>characterSetFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

  <resource-ref>
    <description>DB Connection</description>
    <res-ref-name>jdbc/TestDB</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
  </resource-ref>

  <error-page>
    <!-- Forbidden directory listing -->
    <error-code>403</error-code>
    <location>/WEB-INF/views/util/error/403.jsp</location>
  </error-page>
</web-app>